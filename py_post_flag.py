import requests,re,time

def postflag(host,flag):
    s = requests.Session()
    cookie = {
        'WEB_SESSIONID':'node0ga3cjon8theo1cekv0jhvw1ul26438.node0'
    }
    URL = 'http://172.16.1.1/front/setAnswer.json'
    myfile  = {
        'infoId':(None, '30'),
        'paperId':(None, '23'),
        'questionId':(None, '2171'),
        'stepType':(None, '2'),
        'ip':(None, host),
        'value':(None, flag)
    }
    try: 
        s.post(URL,files=myfile,cookies=cookie,timeout=5)
        print("已成功提交ip %s 的flag: %s" %(host,flag))
    except:
        print("提交失败！请尝试手动提交---%s:%s" %(host,flag))

with open('result.txt','r') as f:
    for i in f.readlines():
        host = re.findall('(.*?)/',i)
        flag = re.findall('\'(.*?)\'',i)
        postflag(host[0],flag[0])
        time.sleep(10.1)